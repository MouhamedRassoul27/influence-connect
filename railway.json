{
  "services": {
    "api": {
      "builder": "dockerfile",
      "dockerfile": "apps/api/Dockerfile",
      "rootDirectory": ".",
      "startCommand": "uvicorn main:app --host 0.0.0.0 --port $PORT"
    },
    "db": {
      "image": "ankane/pgvector:latest",
      "healthcheck": {
        "test": ["CMD-SHELL", "pg_isready -U influence"],
        "interval": 5000,
        "timeout": 5000,
        "retries": 5
      }
    }
  },
  "variables": {
    "POSTGRES_USER": "influence",
    "POSTGRES_PASSWORD": "influence123",
    "POSTGRES_DB": "influenceconnect",
    "DATABASE_URL": "postgresql://influence:influence123@db:5432/influenceconnect",
    "HITL_REQUIRED": "true"
  }
}
